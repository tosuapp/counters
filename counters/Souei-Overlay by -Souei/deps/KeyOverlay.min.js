const tileWrapperNode=document.createElement("div"),tileNode=document.createElement("div");tileWrapperNode.classList.add("wrapper","absolute"),tileNode.classList.add("tile","absolute"),tileWrapperNode.appendChild(tileNode);class KeyOverlay{constructor(e,t,i={speed:void 0,keyTextId:void 0}){this.tiles=document.getElementById(t),this.keyField=document.getElementById(e),this.keyText=document.getElementById(i.keyTextId)||void 0,this.keyName=this.keyText?this.keyText.innerText:void 0,this.speed=i.speed||.3,this.tile=null}update(e){e.isPressed?(this.tile||(this.tile=tileWrapperNode.cloneNode(!0),this.tiles.appendChild(this.tile),this.updateTile()),this.keyText&&0!==e.count&&(this.keyText.innerText=e.count),this.keyField.style.backgroundColor="var(--keyOnTapColor)"):(this.tile&&(this.tile.end=!0,this.keyField.style.backgroundColor=""),this.keyText&&this.keyText.innerText!==this.keyName&&0===e.count&&(this.keyText.innerText=this.keyName))}updateTile(){const e=performance.now(),t=()=>{const i=performance.now(),s=Math.min(this.speed*(i-e),this.tiles.lastChild.offsetWidth);this.tile.firstChild.style.width=s+"px",this.tile.end?(this.tile.style.animation=`moveOut ${this.tile.offsetWidth/this.speed}ms linear forwards`,setTimeout(()=>{this.tiles.firstElementChild.remove()},this.tile.offsetWidth/this.speed),this.tile=null):requestAnimationFrame(t)};t()}}window.KeyOverlay=KeyOverlay;